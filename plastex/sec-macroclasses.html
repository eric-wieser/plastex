<!DOCTYPE html>
<html lang="en">
<head>
<script>
  MathJax = { 
    tex: {
		    inlineMath: [['\\(','\\)']]
	} }
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<meta name="generator" content="plasTeX" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>plasTeX 3.0 — A Python Framework for Processing LaTeX Documents: Python Classes</title>
<link rel="next" href="sec-inimacros.html" title="INI Files" />
<link rel="prev" href="sect0007.html" title="Defining Macros in Python" />
<link rel="up" href="sect0007.html" title="Defining Macros in Python" />
<link rel="stylesheet" href="styles/theme-white.css" />
<link rel="stylesheet" href="styles/pygments.css" />
</head>

<body>
<header>
<svg  id="toc-toggle" class="icon icon-list-numbered "><use xlink:href="symbol-defs.svg#icon-list-numbered"></use></svg>
<h1 id="doc_title"><a href="index.html">plasTeX 3.0 — A Python Framework for Processing LaTeX Documents</a></h1>
</header>

<div class="wrapper">
<nav class="toc">
<ul class="sub-toc-0">
<li class="">
  <a href="sect0001.html"><span class="toc_ref">1</span> <span class="toc_entry">Introduction</span></a>
 </li>
<li class="">
  <a href="sec-command-line.html"><span class="toc_ref">2</span> <span class="toc_entry"><b class="bf">plastex</b> — The Command-Line Interface</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0002.html"><span class="toc_ref">2.1</span> <span class="toc_entry">Command-Line and Configuration Options</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-general-options.html"><span class="toc_ref">2.1.1</span> <span class="toc_entry">General Options</span></a>
 </li>
<li class="">
  <a href="sec-config-document.html"><span class="toc_ref">2.1.2</span> <span class="toc_entry">Document Properties</span></a>
 </li>
<li class="">
  <a href="sect0003.html"><span class="toc_ref">2.1.3</span> <span class="toc_entry">Counters</span></a>
 </li>
<li class="">
  <a href="sec-config-links.html"><span class="toc_ref">2.1.4</span> <span class="toc_entry">Document Links</span></a>
 </li>
<li class="">
  <a href="sec-config-files.html"><span class="toc_ref">2.1.5</span> <span class="toc_entry">Input and Output Files</span></a>
 </li>
<li class="">
  <a href="sec-config-images.html"><span class="toc_ref">2.1.6</span> <span class="toc_entry">Image Options</span></a>
 </li>
<li class="">
  <a href="sec-config-html5.html"><span class="toc_ref">2.1.7</span> <span class="toc_entry">HTML5 Renderer Options</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-document.html"><span class="toc_ref">3</span> <span class="toc_entry">The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-sections.html"><span class="toc_ref">3.1</span> <span class="toc_entry">Sections</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-links.html"><span class="toc_ref">3.1.1</span> <span class="toc_entry">Navigation and Links</span></a>
 </li>
<li class="">
  <a href="sec-tableofcontents.html"><span class="toc_ref">3.1.2</span> <span class="toc_entry">Table of Contents</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-paragraphs.html"><span class="toc_ref">3.2</span> <span class="toc_entry">Paragraphs</span></a>
 </li>
<li class="">
  <a href="sec-complexdoc.html"><span class="toc_ref">3.3</span> <span class="toc_entry">Complex Structures</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sec-lists.html"><span class="toc_ref">3.3.1</span> <span class="toc_entry">Lists</span></a>
 </li>
<li class="">
  <a href="sect0004.html"><span class="toc_ref">3.3.2</span> <span class="toc_entry">Bibliography</span></a>
 </li>
<li class="">
  <a href="sec-arrays.html"><span class="toc_ref">3.3.3</span> <span class="toc_entry">Arrays and Tabular Environments</span></a>
 </li>
<li class="">
  <a href="sect0005.html"><span class="toc_ref">3.3.4</span> <span class="toc_entry">Indexes</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class=" active">
  <a href="sec-macros.html"><span class="toc_ref">4</span> <span class="toc_entry">Understanding Macros and Packages</span></a>
  <span class="expand-toc">▼</span>
  <ul class="sub-toc-1 active">
     <li class="">
  <a href="sect0006.html"><span class="toc_ref">4.1</span> <span class="toc_entry">Defining Macros in L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X</span></a>
 </li>
<li class=" active">
  <a href="sect0007.html"><span class="toc_ref">4.2</span> <span class="toc_entry">Defining Macros in Python</span></a>
  <span class="expand-toc">▼</span>
  <ul class="sub-toc-2 active">
     <li class=" active current">
  <a href="sec-macroclasses.html"><span class="toc_ref">4.2.1</span> <span class="toc_entry">Python Classes</span></a>
 </li>
<li class="">
  <a href="sec-inimacros.html"><span class="toc_ref">4.2.2</span> <span class="toc_entry">INI Files</span></a>
 </li>
<li class="">
  <a href="sec-contextmacros.html"><span class="toc_ref">4.2.3</span> <span class="toc_entry">The Document Context</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-packages.html"><span class="toc_ref">4.3</span> <span class="toc_entry">Packages</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0008.html"><span class="toc_ref">5</span> <span class="toc_entry">Renderers</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-simple-renderer-ex.html"><span class="toc_ref">5.1</span> <span class="toc_entry">Simple Renderer Example</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0009.html"><span class="toc_ref">5.1.1</span> <span class="toc_entry">Extending the Simple Renderer</span></a>
 </li>
<li class="">
  <a href="subsec-renderer-from-script.html"><span class="toc_ref">5.1.2</span> <span class="toc_entry">Using a Renderer from the plastex Script</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-renderable.html"><span class="toc_ref">5.2</span> <span class="toc_entry">Renderable Objects</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0010.html"><span class="toc_ref">5.2.1</span> <span class="toc_entry">Determining the Correct Rendering Method</span></a>
 </li>
<li class="">
  <a href="sect0011.html"><span class="toc_ref">5.2.2</span> <span class="toc_entry">Generating Files</span></a>
 </li>
<li class="">
  <a href="sect0012.html"><span class="toc_ref">5.2.3</span> <span class="toc_entry">Generating Images</span></a>
 </li>
<li class="">
  <a href="sect0013.html"><span class="toc_ref">5.2.4</span> <span class="toc_entry">Generating Vector Images</span></a>
 </li>
<li class="">
  <a href="sect0014.html"><span class="toc_ref">5.2.5</span> <span class="toc_entry">Static Images</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-pt.html"><span class="toc_ref">5.3</span> <span class="toc_entry">Page Template Renderer</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0015.html"><span class="toc_ref">5.3.1</span> <span class="toc_entry">Defining and Using Templates</span></a>
 </li>
<li class="">
  <a href="sect0016.html"><span class="toc_ref">5.3.2</span> <span class="toc_entry">Defining and Using Themes</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-html5.html"><span class="toc_ref">5.4</span> <span class="toc_entry">HTML5 Renderer</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0017.html"><span class="toc_ref">5.4.1</span> <span class="toc_entry">Basic use and configuration</span></a>
 </li>
<li class="">
  <a href="sec-html5-pkg.html"><span class="toc_ref">5.4.2</span> <span class="toc_entry">Interactions with packages</span></a>
 </li>
<li class="">
  <a href="sect0018.html"><span class="toc_ref">5.4.3</span> <span class="toc_entry">Themes</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0019.html"><span class="toc_ref">5.5</span> <span class="toc_entry">XHTML Renderer</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0020.html"><span class="toc_ref">5.5.1</span> <span class="toc_entry">Themes</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0021.html"><span class="toc_ref">5.6</span> <span class="toc_entry">Other builtin renderers</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0022.html"><span class="toc_ref">6</span> <span class="toc_entry">plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Frameworks and APIs</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-macros-api.html"><span class="toc_ref">6.1</span> <span class="toc_entry"><span class="ttfamily">plasTeX</span> — The Python Macro and Document Interfaces</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0023.html"><span class="toc_ref">6.1.1</span> <span class="toc_entry">Macro Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-ConfigManager.html"><span class="toc_ref">6.2</span> <span class="toc_entry"><span class="ttfamily">plasTeX.ConfigManager</span> — plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Configuration</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0024.html"><span class="toc_ref">6.2.1</span> <span class="toc_entry">ConfigManager Objects</span></a>
 </li>
<li class="">
  <a href="sect0025.html"><span class="toc_ref">6.2.2</span> <span class="toc_entry">ConfigSection Objects</span></a>
 </li>
<li class="">
  <a href="sect0026.html"><span class="toc_ref">6.2.3</span> <span class="toc_entry">Configuration Option Types</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-DOM.html"><span class="toc_ref">6.3</span> <span class="toc_entry"><span class="ttfamily">plasTeX.DOM</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Document Object Model (DOM)</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0027.html"><span class="toc_ref">6.3.1</span> <span class="toc_entry">plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X vs. XML</span></a>
 </li>
<li class="">
  <a href="sect0028.html"><span class="toc_ref">6.3.2</span> <span class="toc_entry">Node Objects</span></a>
 </li>
<li class="">
  <a href="sect0029.html"><span class="toc_ref">6.3.3</span> <span class="toc_entry">DocumentFragment Objects</span></a>
 </li>
<li class="">
  <a href="sect0030.html"><span class="toc_ref">6.3.4</span> <span class="toc_entry">Element Objects</span></a>
 </li>
<li class="">
  <a href="sect0031.html"><span class="toc_ref">6.3.5</span> <span class="toc_entry">Text Objects</span></a>
 </li>
<li class="">
  <a href="sect0032.html"><span class="toc_ref">6.3.6</span> <span class="toc_entry">Document Objects</span></a>
 </li>
<li class="">
  <a href="sect0033.html"><span class="toc_ref">6.3.7</span> <span class="toc_entry">Command Objects</span></a>
 </li>
<li class="">
  <a href="sect0034.html"><span class="toc_ref">6.3.8</span> <span class="toc_entry">Environment Objects</span></a>
 </li>
<li class="">
  <a href="sect0035.html"><span class="toc_ref">6.3.9</span> <span class="toc_entry">TeXFragment Objects</span></a>
 </li>
<li class="">
  <a href="sec-texdocument-objects.html"><span class="toc_ref">6.3.10</span> <span class="toc_entry">TeXDocument Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-TeX.html"><span class="toc_ref">6.4</span> <span class="toc_entry"><span class="ttfamily">plasTeX.TeX</span> — The T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Stream</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0036.html"><span class="toc_ref">6.4.1</span> <span class="toc_entry">TeX Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Context.html"><span class="toc_ref">6.5</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Context</span> — The T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Context</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0037.html"><span class="toc_ref">6.5.1</span> <span class="toc_entry">Context Objects</span></a>
 </li>
<li class="">
  <a href="sec-context-language.html"><span class="toc_ref">6.5.2</span> <span class="toc_entry">Context language</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Renderers.html"><span class="toc_ref">6.6</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Renderers</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Rendering Framework</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0038.html"><span class="toc_ref">6.6.1</span> <span class="toc_entry">Renderer Objects</span></a>
 </li>
<li class="">
  <a href="sect0039.html"><span class="toc_ref">6.6.2</span> <span class="toc_entry">Renderable MixIn</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="module-plasTeX-Imagers.html"><span class="toc_ref">6.7</span> <span class="toc_entry"><span class="ttfamily">plasTeX.Imagers</span> — The plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X Imaging Framework</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0040.html"><span class="toc_ref">6.7.1</span> <span class="toc_entry">Imager Objects</span></a>
 </li>
<li class="">
  <a href="sect0041.html"><span class="toc_ref">6.7.2</span> <span class="toc_entry">Image Objects</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-plugins.html"><span class="toc_ref">6.8</span> <span class="toc_entry">Plugins</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sub-templates-plugin.html"><span class="toc_ref">6.8.1</span> <span class="toc_entry">Templates plugin</span></a>
 </li>
<li class="">
  <a href="sub-package-plugin.html"><span class="toc_ref">6.8.2</span> <span class="toc_entry">Package plugin</span></a>
 </li>
<li class="">
  <a href="sub-renderer-plugin.html"><span class="toc_ref">6.8.3</span> <span class="toc_entry">Renderer plugin</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0042.html"><span class="toc_ref">A</span> <span class="toc_entry">About This Document</span></a>
 </li>
<li class="">
  <a href="sect0043.html"><span class="toc_ref">B</span> <span class="toc_entry">Frequently Asked Questions</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0044.html"><span class="toc_ref">B.1</span> <span class="toc_entry">Parsing L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-2">
     <li class="">
  <a href="sect0045.html"><span class="toc_ref">B.1.1</span> <span class="toc_entry">How can I make plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X work with my complicated macros?</span></a>
 </li>
<li class="">
  <a href="sect0046.html"><span class="toc_ref">B.1.2</span> <span class="toc_entry">How can I get plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X to find my L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X packages?</span></a>
 </li>

  </ul>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0047.html"><span class="toc_ref">C</span> <span class="toc_entry">Debugging</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sec-logging-levels.html"><span class="toc_ref">C.1</span> <span class="toc_entry">Logging levels</span></a>
 </li>
<li class="">
  <a href="sect0048.html"><span class="toc_ref">C.2</span> <span class="toc_entry">Using the python debugger</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sec-zpttutorial.html"><span class="toc_ref">D</span> <span class="toc_entry">Zope Page Template Tutorial</span></a>
  <span class="expand-toc">▶</span>
  <ul class="sub-toc-1">
     <li class="">
  <a href="sect0049.html"><span class="toc_ref">D.1</span> <span class="toc_entry">Template Attribute Language Expression Syntax (TALES)</span></a>
 </li>
<li class="">
  <a href="sec-talattributes.html"><span class="toc_ref">D.2</span> <span class="toc_entry">Template Attribute Language (TAL) Attributes</span></a>
 </li>

  </ul>
 </li>
<li class="">
  <a href="sect0050.html"><span class="toc_ref">E</span> <span class="toc_entry">Index</span></a>
 </li>
</ul>
</nav>

<div class="content">
<div class="content-wrapper">


<div class="main-text">
<h2 id="sec:macroclasses">4.2.1 Python Classes</h2>
<p>Both L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X command and environments can be implemented in Python classes. plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X includes a base class for each one: <span class="ttfamily">Command</span> for commands and <span class="ttfamily">Environment</span> for environments. For the most part, these two classes behave in the same way. They both are responsible for parsing their arguments, organizing their child nodes, incrementing counters, etc. much like their L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X counterparts. There is also a variant of the <span class="ttfamily">Environment</span> class called <span class="ttfamily">NoCharSubEnvironment</span> which temporarily turns off character substitutions described in Section&#160;<a href="sec-texdocument-objects.html">6.3.10</a>. The Python macro class feature set is based on common L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X conventions. So if the L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X macro you are implementing in Python uses standard L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X conventions, you job will be very easy. If you are doing unconventional operations, you will probably still succeed, you just might have to do a little more work. </p>
<p>The three most important parts of the Python macro API are: 1) the <span class="ttfamily">args</span> attribute, 2) the <span class="ttfamily">invoke</span> method, and 3) the <span class="ttfamily">digest</span> method. When writing your own macros, these are used the most by far. </p>
<h3 id="a0000000057">The <span class="ttfamily">args</span> Attribute</h3>
<p>The <span class="ttfamily">args</span> attribute is a string attribute on the class that indicates what the arguments to the macro are. In addition to simply indicating the number of arguments, whether they are mandatory or optional, and what characters surround the argument as in L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X, the <span class="ttfamily">args</span> string also gives names to each of the argument and can also indicate the content of the argument (i.e. int, float, list, dictionary, string, etc.). The names given to each argument determine the key that the argument is stored under in the the <span class="ttfamily">attributes</span> dictionary of the class instance. Below is a simple example of a macro class. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

class framebox(Command):
    """ \framebox[width][pos]{text} """
    args = '[ width ] [ pos ] text'
</pre>
<p>In the <span class="ttfamily">args</span> string of the \<span class="ttfamily">framebox</span> macro, three arguments are defined. The first two are optional and the third one is mandatory. Once each argument is parsed, in is put into the <span class="ttfamily">attributes</span> dictionary under the name given in the <span class="ttfamily">args</span> string. For example, the <span class="ttfamily">attributes</span> dictionary of an instance of \<span class="ttfamily">framebox</span> will have the keys “width”, “pos”, and “text” once it is parsed and can be accessed in the usual Python way. </p>
<pre class="verbatim">
self.attributes['width']
self.attributes['pos']
self.attributes['text']
</pre>
<p>In plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X, any argument that isn’t mandatory (i.e. no grouping characters in the <span class="ttfamily">args</span> string) is optional<a class="footnote" href="#a0000000058">
  <sup class="footnotemark">1</sup>
</a>. This includes arguments surrounded by parentheses ((&#160;)), square brackets ([&#160;]), and angle brackets (&lt;&#160;&gt;). This also lets you combine multiple versions of a command into one macro. For example, the \<span class="ttfamily">framebox</span> command also has a form that looks like: \<span class="ttfamily">framebox(x_dimen,y_dimen)[pos]{text}</span>. This leads to the Python macro class in the following code sample that encompasses both forms. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

class framebox(Command):
    """

    \framebox[width][pos]{text} or
    \framebox(x_dimen,ydimen)[pos]{text}

    """
    args = '( dimens ) [ width ] [ pos ] text'
</pre>
<p> The only thing to keep in mind is that in the second form, the <span class="rmfamily"><i class="itshape">pos </i></span> attribute is going to end up under the <span class="rmfamily"><i class="itshape">width </i></span> key in the <span class="ttfamily">attributes</span> dictionary since it is the first argument in square brackets, but this can be fixed up in the <span class="ttfamily">invoke</span> method if needed. Also, if an optional argument is not present on the macro, the value of that argument in the <span class="ttfamily">attributes</span> dictionary is set to <span class="rmfamily"><i class="itshape">None </i></span>. </p>
<p>As mentioned earlier, it is also possible to convert arguments to data types other than the default (a document fragment). A list of the available types is shown in the table below. <div class="centered"><table class="tabular">
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><b class="bf">Name</b></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p><b class="bf">Purpose</b> </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> <span class="rmfamily"><i class="itshape">str </i></span></p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left" 
        rowspan=""
        colspan="">
      <p>expands all macros then sets the value of the argument in the <span class="ttfamily">attributes</span> dictionary to the string content of the argument</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">chr </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘str’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">char </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘str’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">cs </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>sets the attribute to an unexpanded control sequence</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">label </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>expands all macros, converts the result to a string, then sets the current label to the object that is in the <span class="ttfamily">currentlabel</span> attribute of the document context. Generally, an object is put into the <span class="ttfamily">currentlabel</span> attribute if it incremented a counter when it was invoked. The value stored in the <span class="ttfamily">attributes</span> dictionary is the string value of the argument.</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">id </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘label’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">idref </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>expands all macros, converts the result to a string, retrieves the object that was labeled by that value, then adds the labeled object to the <span class="ttfamily">idref</span> dictionary under the name of the argument. This type of argument is used in commands like \<span class="ttfamily">ref</span> that must reference other abjects. The nice thing about ‘idref’ is that it gives you a reference to the object itself which you can then use to retrieve any type of information from it such as the reference value, title, etc. The value stored in the <span class="ttfamily">attributes</span> dictionary is the string value of the argument.</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">ref </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘idref’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">nox </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>just parses the argument, but doesn’t expand the macros</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">list </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>converts the argument to a Python list. By default, the list item separator is a comma (,). You can change the item separator in the args string by appending a set of parentheses surrounding the separator character immediately after ‘list’. For example, to specify a semi-colon separated list for an argument called “foo” you would use the <span class="ttfamily">args</span> string: “foo:list(;)”. It is also possible to cast the type of each item by appending another colon and the data type from this table that you want each item to be. However, you are limited to one data type for every item in the list.</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">dict </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>converts the argument to a Python dictionary. This is commonly used by arguments set up using L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s ‘<span class="sffamily">keyval</span>’ package. By default, key/value pairs are separated by commas, although this character can be changed in the same way as the delimiter in the ‘list’ type. You can also cast each value of the dictionary using the same method as the ‘list’ type. In all cases, keys are converted to strings.</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">dimen </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a dimension and returns an instance of <span class="ttfamily">dimen</span></p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">dimension </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘dimen’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">length </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘dimen’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">number </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads an integer and returns a Python integer</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">count </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘number’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">int </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘number’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">float </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a decimal value and returns a Python float</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">double </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘float’</p>

    </td>
  </tr>
</table></div> </p>
<p>There are also several argument types used for more low-level routines. These don’t parse the typical L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X arguments, they are used for the somewhat more free-form T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X arguments. <div class="centered"><table class="tabular">
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><b class="bf">Name</b></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p><b class="bf">Purpose</b> </p>

    </td>
  </tr>
  <tr>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p> <span class="rmfamily"><i class="itshape">Dimen </i></span></p>

    </td>
    <td  style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X dimension and returns an instance of <span class="ttfamily">dimen</span></p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Length </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘Dimen’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Dimension </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘Dimen’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">MuDimen </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X mu-dimension and returns an instance of <span class="ttfamily">mudimen</span></p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">MuLength </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘MuDimen’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Glue </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X glue parameter and returns an instance of <span class="ttfamily">glue</span></p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Skip </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘MuLength’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Number </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads a T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X integer parameter and returns a Python integer</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Int </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘Number’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Integer </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘Number’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Token </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads an unexpanded token</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Tok </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘Token’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">XToken </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads an expanded token</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">XTok </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>same as ‘XToken’</p>

    </td>
  </tr>
  <tr>
    <td  style="text-align:left; border-right:1px solid black" 
        rowspan=""
        colspan="">
      <p><span class="rmfamily"><i class="itshape">Args </i></span></p>

    </td>
    <td  style="text-align:left" 
        rowspan=""
        colspan="">
      <p>reads tokens up to the first begin group (i.e. {)</p>

    </td>
  </tr>
</table></div> </p>
<p>To use one of the data types, simple append a colon (:) and the data type name to the attribute name in the <span class="ttfamily">args</span> string. Going back to the \<span class="ttfamily">framebox</span> example, the argument in parentheses would be better represented as a list of dimensions. The <span class="rmfamily"><i class="itshape">width </i></span> parameter is also a dimension, and the <span class="rmfamily"><i class="itshape">pos </i></span> parameter is a string. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

class framebox(Command):
    """

    \framebox[width][pos]{text} or
    \framebox(x_dimen,ydimen)[pos]{text}

    """
    args = '( dimens:list:dimen ) [ width:dimen ] [ pos:chr ] text'
</pre>
<h3 id="a0000000059">The <span class="ttfamily">invoke</span> Method</h3>
<p>The <span class="ttfamily">invoke</span> method is responsible for creating a new document context, parsing the macro arguments, and incrementing counters. In most cases, the default implementation will work just fine, but you may want to do some extra processing of the macro arguments or counters before letting the parsing of the document proceed. There are actually several methods in the API that are called within the scope of the <span class="ttfamily">invoke</span> method: <span class="ttfamily">preParse</span>, <span class="ttfamily">preArgument</span>, <span class="ttfamily">postArgument</span>, and <span class="ttfamily">postParse</span>. </p>
<p>The order of execution is quite simple. Before any arguments have been parsed, the <span class="ttfamily">preParse</span> method is called. The <span class="ttfamily">preArgument</span> and <span class="ttfamily">postArgument</span> methods are called before and after each argument, respectively. Then, after all arguments have been parsed, the <span class="ttfamily">postParse</span> method is called. The default implementations of these methods handle the stepping of counters and setting the current labeled item in the document. By default, macros that have been “starred” (i.e. have a ‘*’ before the arguments) do not increment the counter. You can override this behavior in one of these methods if you prefer. </p>
<p>The most common reason for overriding the <span class="ttfamily">invoke</span> method is to post-process the arguments in the <span class="ttfamily">attributes</span> dictionary, or add information to the instance. For example, the \<span class="ttfamily">color</span> command in L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X’s color package could convert the L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X color to the correct CSS format and add it to the CSS style object. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

def latex2htmlcolor(arg):
    if ',' in arg:
        red, green, blue = [float(x) for x in arg.split(',')]
        red = min(int(red * 255), 255)
        green = min(int(green * 255), 255)
        blue = min(int(blue * 255), 255)
    else:
        try:
            red = green = blue = float(arg)
        except ValueError:
            return arg.strip()
    return '#%.2X%.2X%.2X' % (red, green, blue)

class color(Environment):
    args = 'color:str'
    def invoke(self, tex):
        a = Environment.invoke(tex)
        self.style['color'] = latex2htmlcolor(a['color'])
</pre>
<p>While simple things like attribute post-processing is the most common use of the <span class="ttfamily">invoke</span> method, you can do very advanced things like changing category codes, and iterating over the tokens in the T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X processor directly like the <span class="ttfamily">verbatim</span> environment does. </p>
<p>One other feature of the <span class="ttfamily">invoke</span> method that may be of interest is the return value. Most <span class="ttfamily">invoke</span> method implementations do not return anything (or return <span class="rmfamily"><i class="itshape">None </i></span>). In this case, the macro instance itself is sent to the output stream. However, you can also return a list of tokens. If a list of tokens is returned, instead of the macro instance, those tokens are inserted into the output stream. This is useful if you don’t want the macro instance to be part of the output stream or document. In this case, you can simply return an empty list. </p>
<h3 id="a0000000060">The <span class="ttfamily">digest</span> Method</h3>
<p>The <span class="ttfamily">digest</span> method is responsible for converting the output stream into the final document structure. For commands, this generally doesn’t mean anything since they just consist of arguments which have already been parsed. Environments, on the other hand, have a beginning and an ending which surround tokens that belong to that environment. In most cases, the tokens between the \<span class="ttfamily">begin</span> and \<span class="ttfamily">end</span> need to be absorbed into the <span class="ttfamily">childNodes</span> list. </p>
<p>The default implementation of the <span class="ttfamily">digest</span> method should work for most macros, but there are instances where you may want to do some extra processing on the document structure. For example, the \<span class="ttfamily">caption</span> command within <span class="ttfamily">figure</span>s and <span class="ttfamily">table</span>s uses the <span class="ttfamily">digest</span> method to populate the enclosing figure/table’s <span class="ttfamily">caption</span> attribute. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

class Caption(Command):
    args = '[ toc ] self'

    def digest(self, tokens):
        res = Command.digest(self, tokens)

        # Look for the figure environment that we belong to
        node = self.parentNode
        while node is not None and not isinstance(node, figure):
            node = node.parentNode

        # If the figure was found, populate the caption attribute
        if isinstance(node, figure):
            node.caption = self

        return res

class figure(Environment):
    args = '[ loc:str ]'
    caption = None
    class caption_(Caption):
        macroName = 'caption'
        counter = 'figure'
</pre>
<p>More advanced uses of the <span class="ttfamily">digest</span> method might be to construct more complex document structures. For example, tabular and array structures in a document get converted from a simple list of tokens to complex structures with lots of style information added (see section <a href="sec-arrays.html">3.3.3</a>). One simple example of a <span class="ttfamily">digest</span> that does something extra is shown below. It looks for the first node with the name “item” then bails out. </p>
<pre class="verbatim">
from plasTeX import Command, Environment

class toitem(Command):
    def digest(self, tokens):
        """ Throw away everything up to the first 'item' token """
        for tok in tokens:
            if tok.nodeName == 'item':
               # Put the item back into the stream
               tokens.push(tok)
               break
</pre>
<p>One of the more advanced uses of the <span class="ttfamily">digest</span> is on the sectioning commands: \<span class="ttfamily">section</span>, \<span class="ttfamily">subsection</span>, etc. The digest method on sections absorb tokens based on the <span class="ttfamily">level</span> attribute which indicates the hierarchical level of the node. When digested, each section absorbs all tokens until it reaches a section that has a level that is equal to or higher than its own level. This creates the overall document structure as discussed in section <a href="sec-document.html">3</a>. </p>
<h3 id="a0000000061">Other Nifty Methods and Attributes</h3>
<p>There are many other attributes and methods on macros that can be used to affect their behavior. For a full listing, see the API documentation in section <a href="sec-macros-api.html">6.1</a>. Below are descriptions of some of the more commonly used attributes and methods. </p>
<h4 id="a0000000062">The <span class="ttfamily">level</span> attribute</h4>
<p> The <span class="ttfamily">level</span> attribute is an integer that indicates the hierarchical level of the node in the output document structure. The values of this attribute are taken from L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X: \<span class="ttfamily">part</span> is -1, \<span class="ttfamily">chapter</span> is 0, \<span class="ttfamily">section</span> is 1, \<span class="ttfamily">subsection</span> is 2, etc. To create your owne sectioning commands, you can either subclass one of the existing sectioning macros, or simply set its <span class="ttfamily">level</span> attribute to the appropriate number. </p>
<h4 id="a0000000063">The <span class="ttfamily">macroName</span> attribute</h4>
<p> The <span class="ttfamily">macroName</span> attribute is used when you are creating a L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X macro whose name is not a legal Python class name. For example, the macro \<span class="ttfamily">@ifundefined</span> has a ‘@’ in the name which isn’t legal in a Python class name. In this case, you could define the macro as shown below. </p>
<pre class="verbatim">
class ifundefined_(Command):
    macroName = '@ifundefined'
</pre>
<h4 id="a0000000064">The <span class="ttfamily">counter</span> attribute</h4>
<p> The <span class="ttfamily">counter</span> attribute associates a counter with the macro class. It is simply a string that contains the name of the counter. Each time that an instance of the macro class is invoked, the counter is incremented (unless the macro has a ‘*’ argument). </p>
<h4 id="a0000000065">The <span class="ttfamily">ref</span> attribute</h4>
<p> The <span class="ttfamily">ref</span> attribute contains the value normally returned by the \<span class="ttfamily">ref</span> command. </p>
<h4 id="a0000000066">The <span class="ttfamily">title</span> attribute</h4>
<p> The <span class="ttfamily">title</span> attribute retrieves the “title” attribute from the <span class="ttfamily">attributes</span> dictionary. This attribute is also overridable. </p>
<h4 id="a0000000067">The <span class="ttfamily">fullTitle</span> attribute</h4>
<p> The same as the <span class="ttfamily">title</span> attribute, but also includes the counter value at the beginning. </p>
<h4 id="a0000000068">The <span class="ttfamily">tocEntry</span> attribute</h4>
<p> The <span class="ttfamily">tocEntry</span> attribute retrieves the “toc” attribute from the <span class="ttfamily">attributes</span> dictionary. This attribute is also overridable. </p>
<h4 id="a0000000069">The <span class="ttfamily">fullTocEntry</span> attribute</h4>
<p> The same as the <span class="ttfamily">tocEntry</span> attribute, but also includes the counter value at the beginning. </p>
<h4 id="a0000000070">The <span class="ttfamily">style</span> attribute</h4>
<p> The <span class="ttfamily">style</span> attribute is a CSS style object. Essentially, this is just a dictionary where the key is the CSS property name and the value is the CSS property value. It has an attribute called <span class="ttfamily">inline</span> which contains an inline version of the CSS properties for use in the style= attribute of HTML elements. </p>
<h4 id="a0000000071">The <span class="ttfamily">id</span> attribute</h4>
<p> This attribute contains a unique ID for the object. If the object was labeled by a \<span class="ttfamily">label</span> command, the ID for the object will be that label; otherwise, an ID is generated. </p>
<h4 id="a0000000072">The <span class="ttfamily">source</span> attribute</h4>
<p> The <span class="ttfamily">source</span> attribute contains the L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X source representation of the node and all of its contents. </p>
<h4 id="a0000000073">The <span class="ttfamily">currentSection</span> attribute</h4>
<p> The <span class="ttfamily">currentSection</span> attribute contains the section that the node belongs to. </p>
<h4 id="a0000000074">The <span class="ttfamily">expand</span> method</h4>
<p> The <span class="ttfamily">expand</span> method is a thin wrapper around the <span class="ttfamily">invoke</span> method. It simply invokes the macro and returns the result of expanding all of the tokens. Unlike <span class="ttfamily">invoke</span>, you will always get the expanded node (or nodes); you will not get a <span class="rmfamily"><i class="itshape">None </i></span> return value. </p>
<h4 id="a0000000075">The <span class="ttfamily">paragraphs</span> method</h4>
<p> The <span class="ttfamily">paragraphs</span> method does the final processing of paragraphs in a node’s child nodes. It makes sure that all content is wrapped within paragraph nodes. This method is generally called from the <span class="ttfamily">digest</span> method. </p>

</div> <!--main-text -->
<footer id="footnotes">
<ol>
  <li id="a0000000058">While this isn’t always true when L<sup style="font-variant:small-caps; margin-left:-0.3em">a</sup>T<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X expands the macros, it will not cause any problems when plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X compiles the document because plasT<sub style="text-transform:uppercase; margin-left:-0.2em">e</sub>X is less stringent.</li>
</ol>
</footer>
</div> <!-- content-wrapper -->
</div> <!-- content -->
</div> <!-- wrapper -->

<nav class="prev_up_next">
  <a href="sect0007.html" title="Defining Macros in Python"><svg  class="icon icon-arrow-left "><use xlink:href="symbol-defs.svg#icon-arrow-left"></use></svg>
</a>
  <a href="sect0007.html" title="Defining Macros in Python"><svg  class="icon icon-arrow-up "><use xlink:href="symbol-defs.svg#icon-arrow-up"></use></svg>
</a>
  <a href="sec-inimacros.html" title="INI Files"><svg  class="icon icon-arrow-right "><use xlink:href="symbol-defs.svg#icon-arrow-right"></use></svg>
</a>
  <a href="sect0050.html" class="index">Index</a>
</nav>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plastex.js"></script>
<script type="text/javascript" src="js/svgxuse.js"></script>
</body>
</html>